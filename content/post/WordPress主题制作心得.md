---
title:       "WordPress主题制作心得"
subtitle:    ""
description: ""
date:        2016-06-09
author:      ""
image:       ""
tags:        ["WordPress", "博客"]
categories:  ["Tech" ]
---

### 起缘

与WordPress的缘，来自于几年前看到各种大神都有个人博客，自己也想弄一个，纯粹是出于羡慕与好奇。当时不会html、css也不会PHP，在网上搜索了一下，大家都推荐使用WordPress个人博客系统，我跟着网上的教程配置了WordPress，将博客挂到自己的服务器。当时也没有什么东西好分享的，博客一直空空如也，而且发现每次打开博客都很慢，为了使得博客看起来更好看一点安装一些主题。最后因为没有持续的写博客和AWS免费试用到期而不了了之。

我专科读的专业是通信技术，后来学了C语言后，发现自己对编程挺有天赋的，也喜欢折腾这些东西。毅然决定升本软件工程，经过几个月的每天图书馆生活终于如愿考上了福师大的软件工程专业，开始了码农之路。在大学里，系统的学习软件工程后。开始又重新萌发了要开发自己的博客的想法。不过这次不是想用WordPress，而是希望自己写一个博客系统。我个人喜欢比较简洁的设计，朋友推荐HTML5UP的模板，里面的模板大都设计非常简洁，很符合我的口味。我于是拿着HTML5Up的模板开始改成一个博客系统。经过半个月的开发，已经可以基本实现发布文章。然而想一想好像自己是在重复造轮子，WordPress已经很成熟了，还不如直接用WordPress自己设计主题就好了。



### WordPress主题制作

WordPress(简称wp)的主题和插件是非常丰富的，有很多专门推荐wp主题的网站，也有很多主题开发教程。如果只是单纯的使用来讲很多wp主题都非常好，但是大部分主题总是有美中不足之处，有些感觉不够简洁太多软七八糟的模块和内容，有得设计不是很好看。所以还是自己动手丰衣足食比较好。

首先，如果你要制作一款主题，你肯定要先构思好你的主体框架，最好是可以用sketch之类的软件把框图画好，然后按照自己的设计码代码实现。

这是我的设计图:

![img](https://qn.xtcel.com/blog/image/jpg/myblog.jpg)

左侧是导航栏，右侧是文章列表和文章内容详情显示，整个设计非常简洁。
具体的实现也很简单，主要代码都在index.php、hender.php、article.php、style.css里面。
如果需要本主题的可以到我的github上下载。



### 遇到的坑

在开发过程中遇到一些坑，和大家分享一下。

我主要是在导航栏这块遇到比较多的问题，起初导航栏是固定的，就是不可修改的那种。后来想一想为了扩展性，最好还是不要固定，要可以直接在wp后台可以设置比较好。导航栏条目由首页+分类类目+页面组成。首页是默认显示页，会显示所有文章列表。接下来每点击一个分类显示相应分类的文章列表，点击页面的栏目显示相应页面。

开始我觉得应该分别获取分类类目列表和页面列表然后添加到nav中，于是使用了wp_list_categorys()函数获取分类列表，然而发现这个方法的排序不好控制，最后只好放弃。后来发现wp里面有个叫菜单的东西，菜单里面的每个条目可以自由定义，可以是分类，也可以是页面。最关键是还可以自由拖动排序。这简直太好了，刚好符合我的所有需求。生成菜单只需要调用wp_nav_menu()，但是这个函数直接生成div或者nav(这个可以通过参数设置)，里面嵌套ul。每行是在wp后台设置的条目。然而，’首页’这个行并不能直接放到ul里面，这就不好玩了。查看了很多教程，都没有讲这个的处理。有一个比较好的方法是通过wp_nav_menu()设置Walker参数，自定义一个Walker_Nav_Menu,但是看了一下教程，貌似有点复杂，看了一下放弃。既然不能在生成的时候插入，那我等页面加载的时候再插入一个首页的li也是可以。于是就按照自己的思路做了。最后成功插入li,但是还有一些小bug.后期有时间再修复。
